# 商品分类

## 1 商品分类界面的基本布局

效果图：

![image-20210112205834782](../img/image-20210112205834782.png)

基本布局：面包屑导航+卡片视图+第三方树形表格

## 2 调用API获取商品分类数据

注意，需要制定pagenum和pagesize才能实现分页效果。保存商品分类总数和数据到data中

```js
data(){
    return{
      CateList: [],
      //查询条件
      queryInfo: {
        type: 3,
        pagenum: 3,
        pagesize: 5
      },
      total: 0
    }
}
```

```js
async getCateList() {
      const { data: res } = await this.$http.get("categories", {
        params: this.queryInfo
      });
      console.log(res);
      if (res.meta.status !== 200) {
        return this.$messgae.error("获取商品分类数据失败");
      }
      console.log(res.data);

      this.CateList = res.data.result;
      this.total = res.data.total;
      // console.log(this.CateList);
    }
```

## 3 使用vue-table-with-tree-grid树形表格组件

打开VueUI→依赖→安装依赖→运行依赖vue-table-with.....→安装

![image-20210112215156091](../img/image-20210112215156091.png)

安装好后点击详情进入github使用demo

![image-20210112215644995](../img/image-20210112215644995.png)

注册插件的方法：

1. 使用Vue.use进行自动注册

```js
import Vue from 'vue'
import ZkTable from 'vue-table-with-tree-grid'

Vue.use(ZkTable)
```

  2.在入口文件导入插件，使用Vue.component手动注册

```js
import Vue from 'vue'
import ZkTable from 'vue-table-with-tree-grid'

Vue.component(ZkTable.name, ZkTable)
```



从demo中复制html结构，修改细节

- 设置为禁止多选类型表格

  给表格添加selection-type属性 false

- 去除展开行效果

  添加expand-type属性false

- 渲染索引列

  添加show-index属性true

  设置序号列标题：index-text=“xxx”

- 移除鼠标高亮

  添加show-row-hover属性 false